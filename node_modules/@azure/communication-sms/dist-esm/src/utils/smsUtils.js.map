{"version":3,"file":"smsUtils.js","sourceRoot":"","sources":["../../../src/utils/smsUtils.ts"],"names":[],"mappings":"AAAA,uCAAuC;AACvC,kCAAkC;AAIlC,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAG9B,MAAM,UAAU,0BAA0B,CACxC,UAA0B,EAC1B,UAA0B,EAAE;;IAE5B,MAAM,eAAe,GAAoB;QACvC,oBAAoB,EAAE,MAAA,OAAO,CAAC,oBAAoB,mCAAI,KAAK;KAC5D,CAAC;IACF,IAAI,OAAO,CAAC,GAAG,EAAE;QACf,eAAe,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC;KACtC;IAED,OAAO;QACL,IAAI,EAAE,UAAU,CAAC,IAAI;QACrB,aAAa,EAAE,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,EAAE;YAClD,OAAO;gBACL,EAAE,EAAE,cAAc;gBAClB,sBAAsB,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,WAAW,EAAE;gBAC1D,sBAAsB,EAAE,IAAI,CAAC,YAAY,EAAE;aAC5C,CAAC;QACJ,CAAC,CAAC;QACF,OAAO,EAAE,UAAU,CAAC,OAAO;QAC3B,cAAc,kBACZ,oBAAoB,EAAE,MAAA,OAAO,CAAC,oBAAoB,mCAAI,KAAK,IACxD,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,GAAG,EAAE,OAAO,CAAC,GAAG,EAAE,CAAC,CACzC;KACF,CAAC;AACJ,CAAC","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { SendMessageRequest } from \"../generated/src/models\";\nimport { SmsSendOptions, SmsSendRequest } from \"../smsClient\";\nimport { Uuid } from \"./uuid\";\nimport { SmsSendOptions as InternalOptions } from \"../generated/src/models\";\n\nexport function generateSendMessageRequest(\n  smsRequest: SmsSendRequest,\n  options: SmsSendOptions = {}\n): SendMessageRequest {\n  const _smsSendOptions: InternalOptions = {\n    enableDeliveryReport: options.enableDeliveryReport ?? false\n  };\n  if (options.tag) {\n    _smsSendOptions[\"tag\"] = options.tag;\n  }\n\n  return {\n    from: smsRequest.from,\n    smsRecipients: smsRequest.to.map((phoneNumberStr) => {\n      return {\n        to: phoneNumberStr,\n        repeatabilityFirstSent: new Date(Date.now()).toUTCString(),\n        repeatabilityRequestId: Uuid.generateUuid()\n      };\n    }),\n    message: smsRequest.message,\n    smsSendOptions: {\n      enableDeliveryReport: options.enableDeliveryReport ?? false,\n      ...(options.tag && { tag: options.tag })\n    }\n  };\n}\n"]}